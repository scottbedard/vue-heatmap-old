new Vue({el:".vue",data:{config:{empty:"#EEEEEE",cold:"#D6E685",hot:"#1E6823",blend:2},calendar:[],colors:[],details:!1,legend:[]},ready:function(){this.init(),this.addHeat(),this.blend()},computed:{cellWidth:{get:function(){return 100/Math.ceil(this.calendar.length/7)+"%"}},weeks:{get:function(){for(var t=[],e=this.calendar.slice(0);e.length>0;)t.push(e.splice(0,7));return t}}},methods:{init:function(){var t=new Date,e=(new Date).valueOf();for(t.setDate(t.getDate()-t.getDay()-364);t.valueOf()<=e;)this.calendar.push({date:t.toDateString(),heat:0,color:this.colors[0]}),t.setDate(t.getDate()+1)},addHeat:function(){for(var t=this.calendar.length,e=0;100>e;e++)this.calendar[Math.floor(Math.random()*t)].heat+=Math.ceil(10*Math.random());this.render()},addHeatSingle:function(t){for(i in this.calendar)if(this.calendar[i].date==t.date){this.calendar[i].heat++;break}this.render()},blend:function(){for(var t=[],e={R:parseInt(this.config.cold.substring(1,3),16),G:parseInt(this.config.cold.substring(3,5),16),B:parseInt(this.config.cold.substring(5,7),16)},a={R:parseInt(this.config.hot.substring(1,3),16),G:parseInt(this.config.hot.substring(3,5),16),B:parseInt(this.config.hot.substring(5,7),16)},n=parseInt(this.config.blend)+1,i={R:(a.R-e.R)/n,G:(a.G-e.G)/n,B:(a.B-e.B)/n},r=0;n>=r;r++){var s={R:Math.round(e.R+i.R*r),G:Math.round(e.G+i.G*r),B:Math.round(e.B+i.B*r)};for(var h in s){var o=s[h];0>o?o=0:o>255&&(o=255),hex=o.toString(16),1==hex.length&&(hex="0"+hex),s[h]=hex}t.push("#"+s.R+s.G+s.B)}this.colors=t,this.render()},clear:function(){for(i in this.calendar)this.calendar[i].heat=0;this.render()},render:function(){for(var t=0,e=this.calendar.length,a=0;e>a;a++)this.calendar[a].heat>t&&(t=this.calendar[a].heat);var n=Math.floor(t/this.colors.length);1>n&&(n=1),this.legend=[];for(a in this.colors)this.legend.push({color:this.colors[a],min:n*a+1,max:n*a+n});for(a in this.calendar)if(0!=this.calendar[a].heat)for(j in this.colors)this.calendar[a].heat>j*n&&(this.calendar[a].color=this.colors[j]);else this.calendar[a].color=this.config.empty},setDetails:function(t){this.details=t}}});